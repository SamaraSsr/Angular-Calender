import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';
@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss'],
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class AppComponent implements OnInit {

  calenderViews = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
  // get current year
  selectedYear = new Date().getFullYear();
  calender: any = [];

  blockedDates = [
    {
      bdate: '2022-01-01T00:00:00',
      btype: 0,
      theday: '01',
      themonth: '1',
      theyear: '2022',
    },
    {
      bdate: '2022-01-02T00:00:00',
      btype: 0,
      theday: '02',
      themonth: '1',
      theyear: '2022',
    },
    {
      bdate: '2022-01-03T00:00:00',
      btype: 0,
      theday: '03',
      themonth: '1',
      theyear: '2022',
    },
    {
      bdate: '2022-01-08T00:00:00',
      btype: 0,
      theday: '08',
      themonth: '1',
      theyear: '2022',
    },
    {
      bdate: '2022-01-09T00:00:00',
      btype: 0,
      theday: '09',
      themonth: '1',
      theyear: '2022',
    },
    {
      bdate: '2022-01-13T00:00:00',
      btype: 0,
      theday: '13',
      themonth: '1',
      theyear: '2022',
    },
    {
      bdate: '2022-01-15T00:00:00',
      btype: 0,
      theday: '15',
      themonth: '1',
      theyear: '2022',
    },
    {
      bdate: '2022-01-16T00:00:00',
      btype: 0,
      theday: '16',
      themonth: '1',
      theyear: '2022',
    },
    {
      bdate: '2022-01-22T00:00:00',
      btype: 0,
      theday: '22',
      themonth: '1',
      theyear: '2022',
    },
    {
      bdate: '2022-01-23T00:00:00',
      btype: 0,
      theday: '23',
      themonth: '1',
      theyear: '2022',
    },
    {
      bdate: '2022-01-29T00:00:00',
      btype: 0,
      theday: '29',
      themonth: '1',
      theyear: '2022',
    },
    {
      bdate: '2022-01-30T00:00:00',
      btype: 0,
      theday: '30',
      themonth: '1',
      theyear: '2022',
    },
    {
      bdate: '2022-02-02T00:00:00',
      btype: 0,
      theday: '02',
      themonth: '2',
      theyear: '2022',
    },
    {
      bdate: '2022-02-05T00:00:00',
      btype: 0,
      theday: '05',
      themonth: '2',
      theyear: '2022',
    },
    {
      bdate: '2022-02-06T00:00:00',
      btype: 0,
      theday: '06',
      themonth: '2',
      theyear: '2022',
    },
    {
      bdate: '2022-02-12T00:00:00',
      btype: 0,
      theday: '12',
      themonth: '2',
      theyear: '2022',
    },
    {
      bdate: '2022-02-13T00:00:00',
      btype: 0,
      theday: '13',
      themonth: '2',
      theyear: '2022',
    },
    {
      bdate: '2022-02-19T00:00:00',
      btype: 0,
      theday: '19',
      themonth: '2',
      theyear: '2022',
    },
    {
      bdate: '2022-02-20T00:00:00',
      btype: 0,
      theday: '20',
      themonth: '2',
      theyear: '2022',
    },
    {
      bdate: '2022-02-26T00:00:00',
      btype: 0,
      theday: '26',
      themonth: '2',
      theyear: '2022',
    },
    {
      bdate: '2022-02-27T00:00:00',
      btype: 0,
      theday: '27',
      themonth: '2',
      theyear: '2022',
    },
    {
      bdate: '2022-03-05T00:00:00',
      btype: 0,
      theday: '05',
      themonth: '3',
      theyear: '2022',
    },
    {
      bdate: '2022-03-06T00:00:00',
      btype: 0,
      theday: '06',
      themonth: '3',
      theyear: '2022',
    },
    {
      bdate: '2022-03-12T00:00:00',
      btype: 0,
      theday: '12',
      themonth: '3',
      theyear: '2022',
    },
    {
      bdate: '2022-03-13T00:00:00',
      btype: 0,
      theday: '13',
      themonth: '3',
      theyear: '2022',
    },
    {
      bdate: '2022-03-17T00:00:00',
      btype: 0,
      theday: '17',
      themonth: '3',
      theyear: '2022',
    },
    {
      bdate: '2022-03-19T00:00:00',
      btype: 0,
      theday: '19',
      themonth: '3',
      theyear: '2022',
    },
    {
      bdate: '2022-03-20T00:00:00',
      btype: 0,
      theday: '20',
      themonth: '3',
      theyear: '2022',
    },
    {
      bdate: '2022-03-26T00:00:00',
      btype: 0,
      theday: '26',
      themonth: '3',
      theyear: '2022',
    },
    {
      bdate: '2022-03-27T00:00:00',
      btype: 0,
      theday: '27',
      themonth: '3',
      theyear: '2022',
    },
    {
      bdate: '2022-04-02T00:00:00',
      btype: 0,
      theday: '02',
      themonth: '4',
      theyear: '2022',
    },
    {
      bdate: '2022-04-03T00:00:00',
      btype: 0,
      theday: '03',
      themonth: '4',
      theyear: '2022',
    },
    {
      bdate: '2022-04-09T00:00:00',
      btype: 0,
      theday: '09',
      themonth: '4',
      theyear: '2022',
    },
    {
      bdate: '2022-04-10T00:00:00',
      btype: 0,
      theday: '10',
      themonth: '4',
      theyear: '2022',
    },
    {
      bdate: '2022-04-16T00:00:00',
      btype: 0,
      theday: '16',
      themonth: '4',
      theyear: '2022',
    },
    {
      bdate: '2022-04-17T00:00:00',
      btype: 0,
      theday: '17',
      themonth: '4',
      theyear: '2022',
    },
    {
      bdate: '2022-04-23T00:00:00',
      btype: 0,
      theday: '23',
      themonth: '4',
      theyear: '2022',
    },
    {
      bdate: '2022-04-24T00:00:00',
      btype: 0,
      theday: '24',
      themonth: '4',
      theyear: '2022',
    },
    {
      bdate: '2022-04-30T00:00:00',
      btype: 0,
      theday: '30',
      themonth: '4',
      theyear: '2022',
    },
    {
      bdate: '2022-05-01T00:00:00',
      btype: 0,
      theday: '01',
      themonth: '5',
      theyear: '2022',
    },
    {
      bdate: '2022-05-07T00:00:00',
      btype: 0,
      theday: '07',
      themonth: '5',
      theyear: '2022',
    },
    {
      bdate: '2022-05-08T00:00:00',
      btype: 0,
      theday: '08',
      themonth: '5',
      theyear: '2022',
    },
    {
      bdate: '2022-05-14T00:00:00',
      btype: 0,
      theday: '14',
      themonth: '5',
      theyear: '2022',
    },
    {
      bdate: '2022-05-15T00:00:00',
      btype: 0,
      theday: '15',
      themonth: '5',
      theyear: '2022',
    },
    {
      bdate: '2022-05-21T00:00:00',
      btype: 0,
      theday: '21',
      themonth: '5',
      theyear: '2022',
    },
    {
      bdate: '2022-05-22T00:00:00',
      btype: 0,
      theday: '22',
      themonth: '5',
      theyear: '2022',
    },
    {
      bdate: '2022-05-28T00:00:00',
      btype: 0,
      theday: '28',
      themonth: '5',
      theyear: '2022',
    },
    {
      bdate: '2022-05-29T00:00:00',
      btype: 0,
      theday: '29',
      themonth: '5',
      theyear: '2022',
    },
    {
      bdate: '2022-06-04T00:00:00',
      btype: 0,
      theday: '04',
      themonth: '6',
      theyear: '2022',
    },
    {
      bdate: '2022-06-05T00:00:00',
      btype: 0,
      theday: '05',
      themonth: '6',
      theyear: '2022',
    },
    {
      bdate: '2022-06-06T00:00:00',
      btype: 0,
      theday: '06',
      themonth: '6',
      theyear: '2022',
    },
    {
      bdate: '2022-06-11T00:00:00',
      btype: 0,
      theday: '11',
      themonth: '6',
      theyear: '2022',
    },
    {
      bdate: '2022-06-12T00:00:00',
      btype: 0,
      theday: '12',
      themonth: '6',
      theyear: '2022',
    },
    {
      bdate: '2022-06-18T00:00:00',
      btype: 0,
      theday: '18',
      themonth: '6',
      theyear: '2022',
    },
    {
      bdate: '2022-06-19T00:00:00',
      btype: 0,
      theday: '19',
      themonth: '6',
      theyear: '2022',
    },
    {
      bdate: '2022-06-25T00:00:00',
      btype: 0,
      theday: '25',
      themonth: '6',
      theyear: '2022',
    },
    {
      bdate: '2022-06-26T00:00:00',
      btype: 0,
      theday: '26',
      themonth: '6',
      theyear: '2022',
    },
    {
      bdate: '2022-07-02T00:00:00',
      btype: 0,
      theday: '02',
      themonth: '7',
      theyear: '2022',
    },
    {
      bdate: '2022-07-03T00:00:00',
      btype: 0,
      theday: '03',
      themonth: '7',
      theyear: '2022',
    },
    {
      bdate: '2022-07-09T00:00:00',
      btype: 0,
      theday: '09',
      themonth: '7',
      theyear: '2022',
    },
    {
      bdate: '2022-07-10T00:00:00',
      btype: 0,
      theday: '10',
      themonth: '7',
      theyear: '2022',
    },
    {
      bdate: '2022-07-16T00:00:00',
      btype: 0,
      theday: '16',
      themonth: '7',
      theyear: '2022',
    },
    {
      bdate: '2022-07-17T00:00:00',
      btype: 0,
      theday: '17',
      themonth: '7',
      theyear: '2022',
    },
    {
      bdate: '2022-07-23T00:00:00',
      btype: 0,
      theday: '23',
      themonth: '7',
      theyear: '2022',
    },
    {
      bdate: '2022-07-24T00:00:00',
      btype: 0,
      theday: '24',
      themonth: '7',
      theyear: '2022',
    },
    {
      bdate: '2022-07-30T00:00:00',
      btype: 0,
      theday: '30',
      themonth: '7',
      theyear: '2022',
    },
    {
      bdate: '2022-07-31T00:00:00',
      btype: 0,
      theday: '31',
      themonth: '7',
      theyear: '2022',
    },
    {
      bdate: '2022-08-06T00:00:00',
      btype: 0,
      theday: '06',
      themonth: '8',
      theyear: '2022',
    },
    {
      bdate: '2022-08-07T00:00:00',
      btype: 0,
      theday: '07',
      themonth: '8',
      theyear: '2022',
    },
    {
      bdate: '2022-08-13T00:00:00',
      btype: 0,
      theday: '13',
      themonth: '8',
      theyear: '2022',
    },
    {
      bdate: '2022-08-14T00:00:00',
      btype: 0,
      theday: '14',
      themonth: '8',
      theyear: '2022',
    },
    {
      bdate: '2022-08-20T00:00:00',
      btype: 0,
      theday: '20',
      themonth: '8',
      theyear: '2022',
    },
    {
      bdate: '2022-08-21T00:00:00',
      btype: 0,
      theday: '21',
      themonth: '8',
      theyear: '2022',
    },
    {
      bdate: '2022-08-27T00:00:00',
      btype: 0,
      theday: '27',
      themonth: '8',
      theyear: '2022',
    },
    {
      bdate: '2022-08-28T00:00:00',
      btype: 0,
      theday: '28',
      themonth: '8',
      theyear: '2022',
    },
    {
      bdate: '2022-09-03T00:00:00',
      btype: 0,
      theday: '03',
      themonth: '9',
      theyear: '2022',
    },
    {
      bdate: '2022-09-04T00:00:00',
      btype: 0,
      theday: '04',
      themonth: '9',
      theyear: '2022',
    },
    {
      bdate: '2022-09-10T00:00:00',
      btype: 0,
      theday: '10',
      themonth: '9',
      theyear: '2022',
    },
    {
      bdate: '2022-09-11T00:00:00',
      btype: 0,
      theday: '11',
      themonth: '9',
      theyear: '2022',
    },
    {
      bdate: '2022-09-17T00:00:00',
      btype: 0,
      theday: '17',
      themonth: '9',
      theyear: '2022',
    },
    {
      bdate: '2022-09-18T00:00:00',
      btype: 0,
      theday: '18',
      themonth: '9',
      theyear: '2022',
    },
    {
      bdate: '2022-09-24T00:00:00',
      btype: 0,
      theday: '24',
      themonth: '9',
      theyear: '2022',
    },
    {
      bdate: '2022-09-25T00:00:00',
      btype: 0,
      theday: '25',
      themonth: '9',
      theyear: '2022',
    },
    {
      bdate: '2022-10-01T00:00:00',
      btype: 0,
      theday: '01',
      themonth: '10',
      theyear: '2022',
    },
    {
      bdate: '2022-10-02T00:00:00',
      btype: 0,
      theday: '02',
      themonth: '10',
      theyear: '2022',
    },
    {
      bdate: '2022-10-08T00:00:00',
      btype: 0,
      theday: '08',
      themonth: '10',
      theyear: '2022',
    },
    {
      bdate: '2022-10-09T00:00:00',
      btype: 0,
      theday: '09',
      themonth: '10',
      theyear: '2022',
    },
    {
      bdate: '2022-10-15T00:00:00',
      btype: 0,
      theday: '15',
      themonth: '10',
      theyear: '2022',
    },
    {
      bdate: '2022-10-16T00:00:00',
      btype: 0,
      theday: '16',
      themonth: '10',
      theyear: '2022',
    },
    {
      bdate: '2022-10-22T00:00:00',
      btype: 0,
      theday: '22',
      themonth: '10',
      theyear: '2022',
    },
    {
      bdate: '2022-10-23T00:00:00',
      btype: 0,
      theday: '23',
      themonth: '10',
      theyear: '2022',
    },
    {
      bdate: '2022-10-29T00:00:00',
      btype: 0,
      theday: '29',
      themonth: '10',
      theyear: '2022',
    },
    {
      bdate: '2022-10-30T00:00:00',
      btype: 0,
      theday: '30',
      themonth: '10',
      theyear: '2022',
    },
    {
      bdate: '2022-11-05T00:00:00',
      btype: 0,
      theday: '05',
      themonth: '11',
      theyear: '2022',
    },
    {
      bdate: '2022-11-06T00:00:00',
      btype: 0,
      theday: '06',
      themonth: '11',
      theyear: '2022',
    },
    {
      bdate: '2022-11-11T00:00:00',
      btype: 0,
      theday: '11',
      themonth: '11',
      theyear: '2022',
    },
    {
      bdate: '2022-11-12T00:00:00',
      btype: 0,
      theday: '12',
      themonth: '11',
      theyear: '2022',
    },
    {
      bdate: '2022-11-13T00:00:00',
      btype: 0,
      theday: '13',
      themonth: '11',
      theyear: '2022',
    },
    {
      bdate: '2022-11-19T00:00:00',
      btype: 0,
      theday: '19',
      themonth: '11',
      theyear: '2022',
    },
    {
      bdate: '2022-11-20T00:00:00',
      btype: 0,
      theday: '20',
      themonth: '11',
      theyear: '2022',
    },
    {
      bdate: '2022-11-26T00:00:00',
      btype: 0,
      theday: '26',
      themonth: '11',
      theyear: '2022',
    },
    {
      bdate: '2022-11-27T00:00:00',
      btype: 0,
      theday: '27',
      themonth: '11',
      theyear: '2022',
    },
    {
      bdate: '2022-12-03T00:00:00',
      btype: 0,
      theday: '03',
      themonth: '12',
      theyear: '2022',
    },
    {
      bdate: '2022-12-04T00:00:00',
      btype: 0,
      theday: '04',
      themonth: '12',
      theyear: '2022',
    },
    {
      bdate: '2022-12-10T00:00:00',
      btype: 0,
      theday: '10',
      themonth: '12',
      theyear: '2022',
    },
    {
      bdate: '2022-12-11T00:00:00',
      btype: 0,
      theday: '11',
      themonth: '12',
      theyear: '2022',
    },
    {
      bdate: '2022-12-12T00:00:00',
      btype: 0,
      theday: '12',
      themonth: '12',
      theyear: '2022',
    },
    {
      bdate: '2022-12-17T00:00:00',
      btype: 0,
      theday: '17',
      themonth: '12',
      theyear: '2022',
    },
    {
      bdate: '2022-12-18T00:00:00',
      btype: 0,
      theday: '18',
      themonth: '12',
      theyear: '2022',
    },
    {
      bdate: '2022-12-24T00:00:00',
      btype: 0,
      theday: '24',
      themonth: '12',
      theyear: '2022',
    },
    {
      bdate: '2022-12-25T00:00:00',
      btype: 0,
      theday: '25',
      themonth: '12',
      theyear: '2022',
    },
    {
      bdate: '2022-12-31T00:00:00',
      btype: 0,
      theday: '31',
      themonth: '12',
      theyear: '2022',
    },
  ];

  ngOnInit(): void {
    this.calenderViews.forEach(view => {
      this.buildCalenderMonths(view, this.selectedYear);
    });
  }

  getDaysInMonth = (month: number, year: number) => new Date(year, month, 0).getDate();

  buildCalenderMonths = (monthNumber: number, year: number) => {
    const daysInMonth = this.getDaysInMonth(monthNumber, year);
    const month: any[] = [];
    for (let i = 1; i <= daysInMonth; i++) {
      const date = new Date(year, monthNumber - 1, i);
      month.push({
        date: date,
        day: date.getDate(),
        month: date.getMonth() + 1,
        year: date.getFullYear(),
        dayOfWeek: date.getDay(),
        isToday: date.getDate() === new Date().getDate() && date.getMonth() === new Date().getMonth() && date.getFullYear() === new Date().getFullYear(),
        isSelected: date.getDate() === new Date().getDate() && date.getMonth() === new Date().getMonth() && date.getFullYear() === new Date().getFullYear(),
        isDisabled: this.isDisabledDate(date, monthNumber, year),
        monthName: date.toLocaleString('en-us', { month: 'long' }),
        dayName: date.toLocaleString('en-us', { weekday: 'short' })
      });
    }
    this.calender.push(month);
    console.log(this.calender);
    // build calender with sunday as first day of week and saturday as last day of week 
  }

  isDisabledDate = (inCommingDate: Date, monthNumber: string | number, year: string | number) => {
    const filteredDates = this.blockedDates.filter(date => Number(date.themonth) === monthNumber && Number(date.theyear) === year);
    return filteredDates.find((filteredDate: any) => Number(filteredDate.theday) === inCommingDate.getDate()) ? true : false;
  }
}
